Usage: codeanatomy build REPO-ROOT [ARGS]

Build the Code Property Graph for a repository.

Returns:
-------
int
    Exit status code.

Raises:
------
ValueError
    If engine execution fails.

╭─ Parameters ─────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ *  REPO-ROOT --repo-root  Root directory of the repository to analyze. [required]                                    │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Session ────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Session and run context options.                                                                                     │
│                                                                                                                      │
│ --config     Path to configuration file (overrides default search). [default: None]                                  │
│ --run-id     Explicit run identifier (UUID7 generated if not provided). [default: None]                              │
│ --log-level  Logging verbosity level. [choices: DEBUG, INFO, WARNING, ERROR] [env var: CODEANATOMY_LOG_LEVEL]        │
│              [default: INFO]                                                                                         │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Output ─────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Configure output directory and artifact selection.                                                                   │
│                                                                                                                      │
│ OUTPUT-DIR --output-dir -o               Directory for CPG outputs. Defaults to <repo_root>/build. [env var:         │
│                                          CODEANATOMY_OUTPUT_DIR] [default: None]                                     │
│ WORK-DIR --work-dir                      Working directory for intermediate artifacts. [env var:                     │
│                                          CODEANATOMY_WORK_DIR] [default: None]                                       │
│ INCLUDE-ERRORS --include-errors          Include extraction error artifacts. [default: True]                         │
│   --no-include-errors                                                                                                │
│ INCLUDE-MANIFEST --include-manifest      Include run manifest in output. [default: True]                             │
│   --no-include-manifest                                                                                              │
│ INCLUDE-RUN-BUNDLE --include-run-bundle  Include run bundle directory. [default: True]                               │
│   --no-include-run-bundle                                                                                            │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ SCIP Configuration ─────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Configure SCIP semantic index extraction.                                                                            │
│                                                                                                                      │
│ DISABLE-SCIP --disable-scip            Disable SCIP indexing (not recommended; produces less useful outputs). When   │
│   --no-disable-scip                    enabled, SCIP-specific options are ignored and a warning is emitted. [env     │
│                                        var: CODEANATOMY_DISABLE_SCIP] [default: False]                               │
│ SCIP-OUTPUT-DIR --scip-output-dir      SCIP output directory (relative to repo root unless absolute). Default:       │
│                                        build/scip. [env var: CODEANATOMY_SCIP_OUTPUT_DIR] [default: None]            │
│ SCIP-INDEX-PATH-OVERRIDE               Override the index.scip path. [default: None]                                 │
│   --scip-index-path-override                                                                                         │
│ SCIP-PYTHON-BIN --scip-python-bin      scip-python executable to use. [default: scip-python]                         │
│ SCIP-TARGET-ONLY --scip-target-only    Optional target file/module to index. [default: None]                         │
│ SCIP-TIMEOUT-S --scip-timeout-s        Timeout in seconds for scip-python. [default: None]                           │
│ SCIP-ENV-JSON --scip-env-json          Path to SCIP environment JSON. [default: None]                                │
│ NODE-MAX-OLD-SPACE-MB                  Node.js memory cap (MB) for scip-python. [default: None]                      │
│   --node-max-old-space-mb                                                                                            │
│ SCIP-EXTRA-ARG --scip-extra-arg        Extra arguments passed to scip-python (repeatable). [default: ()]             │
│   --empty-scip-extra-arg                                                                                             │
│ SCIP-PROJECT-NAME --scip-project-name  Override SCIP project name. [default: None]                                   │
│ SCIP-PROJECT-VERSION                   Override SCIP project version. [default: None]                                │
│   --scip-project-version                                                                                             │
│ SCIP-PROJECT-NAMESPACE                 Override SCIP project namespace. [default: None]                              │
│   --scip-project-namespace                                                                                           │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Incremental Processing ─────────────────────────────────────────────────────────────────────────────────────────────╮
│ Configure incremental/CDF-based processing.                                                                          │
│                                                                                                                      │
│ INCREMENTAL --incremental --no-incremental  Enable incremental processing using cached state. [default: False]       │
│ INCREMENTAL-STATE-DIR                       Directory for incremental processing state (relative to repo_root). [env │
│   --incremental-state-dir                   var: CODEANATOMY_STATE_DIR] [default: None]                              │
│ INCREMENTAL-REPO-ID --incremental-repo-id   Repository identifier for incremental state. [env var:                   │
│                                             CODEANATOMY_REPO_ID] [default: None]                                     │
│ INCREMENTAL-IMPACT-STRATEGY                 Strategy for computing incremental impact. [choices: hybrid,             │
│   --incremental-impact-strategy             symbol_closure, import_closure] [env var:                                │
│                                             CODEANATOMY_INCREMENTAL_IMPACT_STRATEGY] [default: None]                 │
│ GIT-BASE-REF --git-base-ref                 Git base ref for incremental diff. [env var: CODEANATOMY_GIT_BASE_REF]   │
│                                             [default: None]                                                          │
│ GIT-HEAD-REF --git-head-ref                 Git head ref for incremental diff. [env var: CODEANATOMY_GIT_HEAD_REF]   │
│                                             [default: None]                                                          │
│ GIT-CHANGED-ONLY --git-changed-only         Process only changed files (no closure expansion). [env var:             │
│   --no-git-changed-only                     CODEANATOMY_GIT_CHANGED_ONLY] [default: False]                           │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Repository Scope ───────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Control which files are included in analysis.                                                                        │
│                                                                                                                      │
│ INCLUDE-GLOB --include-glob              Glob patterns for files to include (repeatable). [env var:                  │
│   --empty-include-glob                   CODEANATOMY_INCLUDE_GLOBS] [default: ()]                                    │
│ EXCLUDE-GLOB --exclude-glob              Glob patterns for files to exclude (repeatable). [env var:                  │
│   --empty-exclude-glob                   CODEANATOMY_EXCLUDE_GLOBS] [default: ()]                                    │
│ INCLUDE-UNTRACKED --include-untracked    Include untracked (not git-ignored) files. [default: True]                  │
│   --no-include-untracked                                                                                             │
│ INCLUDE-SUBMODULES --include-submodules  Include files from git submodules. [default: False]                         │
│   --no-include-submodules                                                                                            │
│ INCLUDE-WORKTREES --include-worktrees    Include files from git worktrees. [default: False]                          │
│   --no-include-worktrees                                                                                             │
│ FOLLOW-SYMLINKS --follow-symlinks        Follow symbolic links when scanning. [default: False]                       │
│   --no-follow-symlinks                                                                                               │
│ EXTERNAL-INTERFACE-DEPTH                 Depth for external interface extraction. [choices: metadata, full]          │
│   --external-interface-depth             [default: metadata]                                                         │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Advanced ───────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Advanced configuration options (most set via config file).                                                           │
│                                                                                                                      │
│ DETERMINISM-TIER --determinism-tier      Determinism level: canonical/tier2, stable_set/tier1/stable,                │
│                                          best_effort/tier0/fast. [choices: tier2, canonical, tier1, stable,          │
│                                          stable_set, tier0, fast, best_effort] [env var:                             │
│                                          CODEANATOMY_DETERMINISM_TIER] [default: None]                               │
│ RUNTIME-PROFILE --runtime-profile        Named runtime profile from configuration. [env var:                         │
│                                          CODEANATOMY_RUNTIME_PROFILE] [default: None]                                │
│ ENGINE-PROFILE --engine-profile          Engine execution profile: small, medium, large. [choices: small, medium,    │
│                                          large] [env var: CODEANATOMY_ENGINE_PROFILE] [default: medium]              │
│ RULEPACK-PROFILE --rulepack-profile      Rulepack profile: Default, LowLatency, Replay, Strict. [choices: Default,   │
│                                          LowLatency, Replay, Strict] [env var: CODEANATOMY_RULEPACK_PROFILE]         │
│                                          [default: Default]                                                          │
│ ENABLE-TREE-SITTER --enable-tree-sitter  Enable tree-sitter extraction for syntax nodes. [default: True]             │
│   --no-enable-tree-sitter                                                                                            │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Observability ──────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Configure OpenTelemetry tracing, metrics, and logging.                                                               │
│                                                                                                                      │
│                                                                                                                      │
│ Configure OpenTelemetry tracing, metrics, and logging.                                                               │
│                                                                                                                      │
│ --enable-traces --no-enable-traces         Enable OpenTelemetry traces. [env var: CODEANATOMY_ENABLE_TRACES]         │
│                                            [default: None]                                                           │
│ --otel-endpoint                            Override OTLP endpoint for traces/metrics/logs. [default: None]           │
│ --otel-protocol                            Override OTLP protocol for traces/metrics/logs. [choices: grpc,           │
│                                            http/protobuf] [default: None]                                            │
│ --otel-sampler                             Override OTEL_TRACES_SAMPLER. [default: None]                             │
│ --otel-sampler-arg                         Override OTEL_TRACES_SAMPLER_ARG. [default: None]                         │
│ --otel-log-correlation                     Enable OpenTelemetry log correlation. [default: None]                     │
│   --no-otel-log-correlation                                                                                          │
│ --otel-metric-export-interval-ms           Override OTEL_METRIC_EXPORT_INTERVAL (ms). [default: None]                │
│ --otel-metric-export-timeout-ms            Override OTEL_METRIC_EXPORT_TIMEOUT (ms). [default: None]                 │
│ --otel-bsp-schedule-delay-ms               Override OTEL_BSP_SCHEDULE_DELAY (ms). [default: None]                    │
│ --otel-bsp-export-timeout-ms               Override OTEL_BSP_EXPORT_TIMEOUT (ms). [default: None]                    │
│ --otel-bsp-max-queue-size                  Override OTEL_BSP_MAX_QUEUE_SIZE. [default: None]                         │
│ --otel-bsp-max-export-batch-size           Override OTEL_BSP_MAX_EXPORT_BATCH_SIZE. [default: None]                  │
│ --otel-blrp-schedule-delay-ms              Override OTEL_BLRP_SCHEDULE_DELAY (ms). [default: None]                   │
│ --otel-blrp-export-timeout-ms              Override OTEL_BLRP_EXPORT_TIMEOUT (ms). [default: None]                   │
│ --otel-blrp-max-queue-size                 Override OTEL_BLRP_MAX_QUEUE_SIZE. [default: None]                        │
│ --otel-blrp-max-export-batch-size          Override OTEL_BLRP_MAX_EXPORT_BATCH_SIZE. [default: None]                 │
│ --enable-metrics --no-enable-metrics       Enable OpenTelemetry metrics. [env var: CODEANATOMY_ENABLE_METRICS]       │
│                                            [default: None]                                                           │
│ --enable-logs --no-enable-logs             Enable OpenTelemetry logs. [env var: CODEANATOMY_ENABLE_LOGS] [default:   │
│                                            None]                                                                     │
│ --otel-test-mode --no-otel-test-mode       Use in-memory exporters for OpenTelemetry (for testing). [env var:        │
│                                            CODEANATOMY_OTEL_TEST_MODE] [default: None]                               │
│ ENABLE-COMPLIANCE --enable-compliance      Enable compliance capture mode. [default: False]                          │
│   --no-enable-compliance                                                                                             │
│ ENABLE-RULE-TRACING --enable-rule-tracing  Enable rule tracing for diagnostics. [default: False]                     │
│   --no-enable-rule-tracing                                                                                           │
│ ENABLE-PLAN-PREVIEW --enable-plan-preview  Enable plan preview generation. [default: False]                          │
│   --no-enable-plan-preview                                                                                           │
│ TRACING-PRESET --tracing-preset            Tracing preset: Maximal, MaximalNoData, ProductionLean. [choices:         │
│                                            Maximal, MaximalNoData, ProductionLean] [default: None]                   │
│ INSTRUMENT-OBJECT-STORE                    Instrument object store operations. [default: False]                      │
│   --instrument-object-store                                                                                          │
│   --no-instrument-object-store                                                                                       │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯


Examples:
  codeanatomy build .                    Build CPG for current directory
  codeanatomy build ./repo -o ./out      Build with custom output directory
  codeanatomy plan ./repo --show-graph   Show execution plan with graph
  codeanatomy config show                Show effective configuration
  codeanatomy delta vacuum --path ./data Vacuum Delta table

Environment Variables:
  CODEANATOMY_LOG_LEVEL      Default log level (DEBUG, INFO, WARNING, ERROR)
  CODEANATOMY_RUNTIME_PROFILE Runtime profile name
  CODEANATOMY_OUTPUT_DIR     Default output directory
  CODEANATOMY_ENABLE_TRACES  Enable OpenTelemetry traces

Tips:
  Use `codeanatomy config show --with-sources` to see config precedence.

Documentation: https://github.com/codeanatomy/codeanatomy
