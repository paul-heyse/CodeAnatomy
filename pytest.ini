
[pytest]
addopts =
    -n auto
    --dist loadgroup
    --cov=src
    --cov-report=term-missing
    --cov-report=xml:build/coverage/coverage.xml
    --cov-report=json:build/coverage/coverage.json
    --json-report
    --json-report-file=build/test-results/pytest-report.json
    --junitxml=build/test-results/junit.xml
markers =
    smoke: quick end-to-end API smoke tests using fixtures
    e2e: long-running end-to-end tests that exercise external surfaces
    integration: validates coordinated behavior across multiple subsystems
    benchmark: performance, non-gating
    performance: integration/performance tests that may take longer to run
    load: high-concurrency load tests (non-gating)
    asyncio: marks tests as async (pytest-asyncio)
    duckdb: requires DuckDB optional dependency
    serial: run tests serially in the same xdist worker to avoid isolation issues
    no_runtime_env: skip session runtime/schema service provisioning
asyncio_mode = auto
filterwarnings =
    ignore:builtin type SwigPy.*:DeprecationWarning
    ignore:builtin type swigvarlink.*:DeprecationWarning
    ignore:cannot collect test class 'TestCase':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestResult':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestCaseResult':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestReport':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestsForFunctionResponse':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestCoverageEdgeRow':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestPlugin':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestResource':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestProvider':pytest.PytestCollectionWarning
    ignore:cannot collect test class 'TestsIngestStep':pytest.PytestCollectionWarning
testpaths = tests
