{"$ref":"#/$defs/RunManifestEnvelope","$defs":{"RunManifestEnvelope":{"title":"RunManifestEnvelope","description":"Envelope for run manifest artifacts.","type":"object","properties":{"kind":{"enum":["run_manifest"]},"payload":{"$ref":"#/$defs/RunManifest"}},"required":["kind","payload"]},"RunManifest":{"title":"RunManifest","description":"Canonical run manifest payload for deterministic outputs.","type":"object","properties":{"run_id":{"title":"Run Id","description":"Unique identifier for a pipeline run.","examples":["run_01HZX4J3C8F8M2KQ"],"type":"string","maxLength":64,"minLength":8,"pattern":"^[A-Za-z0-9][A-Za-z0-9_-]{7,63}$"},"status":{"title":"Artifact Status","description":"Artifact status value.","examples":["ok","error"],"type":"string","maxLength":32,"minLength":1,"pattern":"^[a-z][a-z0-9_-]{0,31}$"},"event_time_unix_ms":{"type":"integer","minimum":0},"plan_signature":{"anyOf":[{"title":"Plan Signature","description":"Deterministic plan signature string.","examples":["sig_01HZX4J3C8F8M2KQ"],"type":"string","minLength":1},{"type":"null"}]},"plan_fingerprints":{"type":"object","additionalProperties":{"title":"Plan Fingerprint","description":"Deterministic plan fingerprint for reproducibility.","examples":["4a7f2b1c9e4d5a6f7b8c9d0e1f2a3b4c5d6e7f8091a2b3c4d5e6f708192a3b4c"],"type":"string","maxLength":128,"minLength":32,"pattern":"^[A-Fa-f0-9]{32,128}$"}},"delta_inputs":{"type":"array","items":{"type":"object"}},"outputs":{"type":"array","items":{"type":"object"}},"runtime_profile_name":{"anyOf":[{"title":"Profile Name","description":"Runtime profile name.","examples":["default","prod_primary"],"type":"string","maxLength":128,"minLength":1,"pattern":"^[A-Za-z0-9][A-Za-z0-9_.:-]{0,127}$"},{"type":"null"}]},"runtime_profile_hash":{"anyOf":[{"title":"Hash Value","description":"Deterministic hash value.","examples":["sha256:4a7f2b1c9e4d5a6f7b8c9d0e1f2a3b4c"],"type":"string","minLength":1},{"type":"null"}]},"determinism_tier":{"anyOf":[{"title":"Non-empty String","description":"Non-empty string value.","examples":["value"],"type":"string","minLength":1},{"type":"null"}]},"output_dir":{"anyOf":[{"type":"string"},{"type":"null"}]},"artifact_ids":{"anyOf":[{"type":"object","additionalProperties":{"type":"string"}},{"type":"null"}],"default":null},"cache_path":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null},"cache_log_glob":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null},"cache_policy_profile":{"anyOf":[{"type":"string"},{"type":"null"}],"default":null},"cache_log_enabled":{"anyOf":[{"type":"boolean"},{"type":"null"}],"default":null},"materialized_outputs":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"default":null}},"required":["run_id","status","event_time_unix_ms","plan_signature","plan_fingerprints","delta_inputs","outputs","runtime_profile_name","runtime_profile_hash","determinism_tier","output_dir"]}}}