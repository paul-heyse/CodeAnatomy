Usage: codeanatomy plan REPO-ROOT [ARGS]

Show the computed execution plan without running it.

Tier 1 parity (available now):
  - Spec hash, view count, output target list, high-level graph summary

Tier 2/3 features (require Rust introspection API):
  - show_graph, show_schedule, show_inferred_deps, show_task_graph, validate

╭─ Parameters ─────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ *  REPO-ROOT --repo-root                    [required]                                                               │
│    SHOW-GRAPH --show-graph --no-show-graph  Display task dependency graph (Tier 2: requires Rust introspection API). │
│                                             [default: False]                                                         │
│    SHOW-SCHEDULE --show-schedule            Display computed execution schedule (Tier 2: requires Rust introspection │
│      --no-show-schedule                     API). [default: False]                                                   │
│    SHOW-INFERRED-DEPS --show-inferred-deps  Display inferred task dependencies (Tier 2: requires Rust introspection  │
│      --no-show-inferred-deps                API). [default: False]                                                   │
│    SHOW-TASK-GRAPH --show-task-graph        Display task graph structure with edges (Tier 3: requires Rust           │
│      --no-show-task-graph                   introspection API). [default: False]                                     │
│    VALIDATE --validate --no-validate        Validate plan consistency and report issues (Tier 3: requires Rust       │
│                                             introspection API). [default: False]                                     │
│    OUTPUT-FORMAT --output-format            Output format for plan display. [choices: text, json, dot] [env var:     │
│                                             CODEANATOMY_PLAN_OUTPUT_FORMAT] [default: text]                          │
│    O -o                                     Write plan to file instead of stdout. [env var:                          │
│                                             CODEANATOMY_PLAN_OUTPUT_FILE] [default: None]                            │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Session ────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Session and run context options.                                                                                     │
│                                                                                                                      │
│ --config     Path to configuration file (overrides default search). [default: None]                                  │
│ --run-id     Explicit run identifier (UUID7 generated if not provided). [default: None]                              │
│ --log-level  Logging verbosity level. [choices: DEBUG, INFO, WARNING, ERROR] [env var: CODEANATOMY_LOG_LEVEL]        │
│              [default: INFO]                                                                                         │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Execution ──────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Control pipeline execution strategy and parallelism.                                                                 │
│                                                                                                                      │
│ ENGINE-PROFILE --engine-profile      Engine resource profile (affects plan shape). [choices: small, medium, large]   │
│                                      [default: medium]                                                               │
│ RULEPACK-PROFILE --rulepack-profile  Rulepack profile for plan compilation. [choices: Default, LowLatency, Replay,   │
│                                      Strict] [default: Default]                                                      │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Observability ──────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Configure OpenTelemetry tracing, metrics, and logging.                                                               │
│                                                                                                                      │
│ --enable-traces --no-enable-traces    Enable OpenTelemetry traces. [env var: CODEANATOMY_ENABLE_TRACES] [default:    │
│                                       None]                                                                          │
│ --otel-endpoint                       Override OTLP endpoint for traces/metrics/logs. [default: None]                │
│ --otel-protocol                       Override OTLP protocol for traces/metrics/logs. [choices: grpc, http/protobuf] │
│                                       [default: None]                                                                │
│ --otel-sampler                        Override OTEL_TRACES_SAMPLER. [default: None]                                  │
│ --otel-sampler-arg                    Override OTEL_TRACES_SAMPLER_ARG. [default: None]                              │
│ --otel-log-correlation                Enable OpenTelemetry log correlation. [default: None]                          │
│   --no-otel-log-correlation                                                                                          │
│ --otel-metric-export-interval-ms      Override OTEL_METRIC_EXPORT_INTERVAL (ms). [default: None]                     │
│ --otel-metric-export-timeout-ms       Override OTEL_METRIC_EXPORT_TIMEOUT (ms). [default: None]                      │
│ --otel-bsp-schedule-delay-ms          Override OTEL_BSP_SCHEDULE_DELAY (ms). [default: None]                         │
│ --otel-bsp-export-timeout-ms          Override OTEL_BSP_EXPORT_TIMEOUT (ms). [default: None]                         │
│ --otel-bsp-max-queue-size             Override OTEL_BSP_MAX_QUEUE_SIZE. [default: None]                              │
│ --otel-bsp-max-export-batch-size      Override OTEL_BSP_MAX_EXPORT_BATCH_SIZE. [default: None]                       │
│ --otel-blrp-schedule-delay-ms         Override OTEL_BLRP_SCHEDULE_DELAY (ms). [default: None]                        │
│ --otel-blrp-export-timeout-ms         Override OTEL_BLRP_EXPORT_TIMEOUT (ms). [default: None]                        │
│ --otel-blrp-max-queue-size            Override OTEL_BLRP_MAX_QUEUE_SIZE. [default: None]                             │
│ --otel-blrp-max-export-batch-size     Override OTEL_BLRP_MAX_EXPORT_BATCH_SIZE. [default: None]                      │
│ --enable-metrics --no-enable-metrics  Enable OpenTelemetry metrics. [env var: CODEANATOMY_ENABLE_METRICS] [default:  │
│                                       None]                                                                          │
│ --enable-logs --no-enable-logs        Enable OpenTelemetry logs. [env var: CODEANATOMY_ENABLE_LOGS] [default: None]  │
│ --otel-test-mode --no-otel-test-mode  Use in-memory exporters for OpenTelemetry (for testing). [env var:             │
│                                       CODEANATOMY_OTEL_TEST_MODE] [default: None]                                    │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯


Examples:
  codeanatomy build .                    Build CPG for current directory
  codeanatomy build ./repo -o ./out      Build with custom output directory
  codeanatomy plan ./repo --show-graph   Show execution plan with graph
  codeanatomy config show                Show effective configuration
  codeanatomy delta vacuum --path ./data Vacuum Delta table

Environment Variables:
  CODEANATOMY_LOG_LEVEL      Default log level (DEBUG, INFO, WARNING, ERROR)
  CODEANATOMY_RUNTIME_PROFILE Runtime profile name
  CODEANATOMY_OUTPUT_DIR     Default output directory
  CODEANATOMY_ENABLE_TRACES  Enable OpenTelemetry traces

Tips:
  Use `codeanatomy config show --with-sources` to see config precedence.

Documentation: https://github.com/codeanatomy/codeanatomy
